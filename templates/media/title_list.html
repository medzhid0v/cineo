{% extends "base.html" %}
{% block title %}Watchlist{% endblock %}
{% block subtitle %}Все фильмы и сериалы{% endblock %}

{% block content %}
  <div class="row" style="margin-bottom: 14px;">
    <div class="muted">Всего: {{ titles|length }}</div>
  </div>

  <div class="grid">
    {% for t in titles %}
      <a class="card" href="{% url 'media:detail' t.pk %}">
        {% if t.poster_url %}
          <img class="poster" src="{{ t.poster_url }}" alt="{{ t.name }}" loading="lazy">
        {% else %}
          <div class="poster"></div>
        {% endif %}

        <div class="card-body">
          <div class="title">{{ t.name }}</div>
          <div class="meta">
            <span class="pill">{% if t.type == "series" %}Сериал{% else %}Фильм{% endif %}</span>
            {% if t.year %}<span class="pill">{{ t.year }}</span>{% endif %}
            {% if t.duration_min %}<span class="pill">{{ t.duration_min }} мин</span>{% endif %}
          </div>
        </div>
      </a>
    {% empty %}
      <div class="panel">Пока нет произведений. Перейди в “Импорт” и добавь по KP ID.</div>
    {% endfor %}
  </div>
{% endblock %}
